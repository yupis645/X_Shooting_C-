
#include"common.h"
#include "di.hpp"
#include "GameManager.h"
#include "DIContainer.h"


// デバックモードの初期状態。デバックモードが有効なら最初からtrue
bool DebugEnable = DebugOn;
int main(void)
{
//========================================================================
//					ウィンドウタイトル
//========================================================================
	SetCaption("X_Shooting");	

//========================================================================
//					スクリーンのサイズ
//========================================================================
	InitConioEx(ScreenConfig::SRN_W,
				ScreenConfig::SRN_H,
				ScreenConfig::PXW,
				ScreenConfig::PXH);	//初期化：タテヨコサイズとドットの大きさ


//========================================================================
//					 DIコンテナを作成
//========================================================================
	auto injector = std::make_shared<DIContainer>();

	auto GM = injector->Create<IGameManager>();
	GM->Init();


/////////////////////////////////////////メインループ//////////////////////////////////////////////////////
	while (1) {
		GM->Input();
		int state = GM->GameLoop();

		if (state == APP_EXIT) {
			break;
		}
	}
///////////////////////////////////////////////////////////////////////////////////////////////////////////


//========================================================================
//				ゲームマネージャーの終了処理
//========================================================================
	GM->End();

//========================================================================
//				アプリ全体の終了処理
//========================================================================
	EndConioEx();	//ConioExの終了処理
	return 0;
}

